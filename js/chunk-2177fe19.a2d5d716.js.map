{"version":3,"sources":["webpack:///./src/views/test/sellorderList.vue?a80a","webpack:///./src/views/test/sellorderList.vue?eee8","webpack:///src/views/test/sellorderList.vue","webpack:///./src/views/test/sellorderList.vue?6d1b","webpack:///./src/views/test/sellorderList.vue?4129"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","domProps","on","$event","target","composing","tokenid","getNftList","_l","item","key","tokenID","_s","item_hash","order","currency","user","nameType","intent","undefined","token","index","token_id","attrs","_q","selectNft","Nftchenge","_e","wethNum","readweth","checkapprove","approve","makeethtoweth","buyOrder","staticRenderFns","data","methods","mintNft","console","log","wapOrder","addBuyorder","mounted","component"],"mappings":"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","file":"js/chunk-2177fe19.a2d5d716.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sellorderList.vue?vue&type=style&index=0&id=3c783067&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-container\"},[_vm._v(\" tokenList \"),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tokenid),expression:\"tokenid\"}],domProps:{\"value\":(_vm.tokenid)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tokenid=$event.target.value}}}),_c('br'),_c('button',{on:{\"click\":function($event){return _vm.getNftList(1)}}},[_vm._v(\" 获取买单列表 \")]),_c('br'),_c('br'),_c('br'),_c('ul',_vm._l((_vm.list),function(item){return _c('div',{key:item.tokenID},[_vm._v(\" \"+_vm._s(item.item_hash)),_c('br'),_vm._v(\" currency: \"+_vm._s(item.order.currency)),_c('br'),_vm._v(\" user: \"+_vm._s(item.order.user)),_c('br'),_vm._v(\" intent:\"+_vm._s(_vm.nameType(item.order.intent))+\" \"),(item!=undefined)?_c('div',_vm._l((item.order.items),function(token,index){return _c('div',{key:token.token_id},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectNft),expression:\"selectNft\"}],attrs:{\"type\":\"radio\",\"name\":\"vehicle\"},domProps:{\"value\":item,\"checked\":_vm._q(_vm.selectNft,item)},on:{\"change\":[function($event){_vm.selectNft=item},function($event){return _vm.Nftchenge(item,index)}]}}),_vm._v(\" \"+_vm._s(token)+\" \"+_vm._s(index)+\" \"),_c('br')])}),0):_vm._e()])}),0),_c('br'),_c('br'),_vm._v(\" weth:\"+_vm._s(_vm.wethNum)),_c('br'),_c('button',{on:{\"click\":_vm.readweth}},[_vm._v(\" 读取weth 余额 \")]),_c('br'),_c('button',{on:{\"click\":_vm.checkapprove}},[_vm._v(\" 检查WETH否授权额度 \")]),_c('br'),_c('button',{on:{\"click\":_vm.approve}},[_vm._v(\" weth 授权 \")]),_c('br'),_c('br'),_c('div',[_c('button',{on:{\"click\":_vm.makeethtoweth}},[_vm._v(\" 1eth转1weth \")])]),_c('br'),_c('br'),_c('br'),_vm._v(\" 单位：weth \"),_c('br'),_c('br'),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.buyOrder}},[_vm._v(\" 吃掉这个卖单（买入这个token） \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home-container\">\n    tokenList\n    <br>\n    <input v-model=\"tokenid\">\n    <br>\n    <button @click=\"getNftList(1)\">\n      获取买单列表\n    </button><br><br>\n    \n    <br>\n    \n    <ul>\n      <div v-for=\"item in list\" :key=\"item.tokenID\">\n        {{ item.item_hash }}<br>\n        currency: {{ item.order.currency }}<br>\n        user: {{ item.order.user }}<br>\n        intent:{{ nameType(item.order.intent) }}\n      \n        <div v-if=\"item!=undefined\">\n          <div v-for=\"(token,index) in item.order.items\" :key=\"token.token_id\">\n            <input v-model=\"selectNft\" type=\"radio\" :value=\"item\" name=\"vehicle\" @change=\"Nftchenge(item,index)\">    {{ token }} {{ index }}\n            <br>\n          </div>\n        </div>\n      </div>\n    </ul><br><br>\n    weth:{{ wethNum }}<br>\n    <button @click=\"readweth\">\n      读取weth 余额\n    </button><br>\n    <button @click=\"checkapprove\">\n      检查WETH否授权额度\n    </button><br>\n    <button @click=\"approve\">\n      weth 授权\n    </button><br>\n    <br>\n    <div>\n      <button @click=\"makeethtoweth\">\n        1eth转1weth\n      </button>\n    </div>\n\n    <br><br>\n    \n    <!-- <ul>\n      <li v-for=\"item in selectNft.slice(0,1)\" :key=\"item.tokenID\">\n        \n        <button v-if=\"item.approveAllstates==false\" :disabled=\"item.approveAllstates\" @click=\"approve(item)\">\n          nft授权 {{ item.tokenID }}  \n        </button>\n        <div>\n          nft{{ item.tokenID }} 价格 \n          <input v-model=\"message\" placeholder=\"edit me\" readonly>\n          <br>\n        </div>\n      </li>\n    </ul> -->\n    \n    <br>\n    单位：weth\n    <br><br>\n    \n    <br><br>\n    <button @click=\"buyOrder\">\n      吃掉这个卖单（买入这个token）\n    </button>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport {mintMyNFT,getAllList,checkapproveAll,approveAll,wapOrderdetails,\ngetsellToken,wethbalance,ethToWeth,X2Y2allowance,X2Y2approve,getweth} from '@/contactLogic/swap/index.js';\n\nimport {AddDayTimes}  from '@/contactLogic/swap/utils.js';\n\n\nlet offChainOrder;\nexport default {\n  data() {\n    return {\n    list:[], \n    selectNft:[],\n    selectNftPrise:[],\n    message:'1',\n    wethNum:'0',\n    tokenid:0 \n    };\n  },\n  methods: {\n    nameType(num){\n      if(num==1){\n        return \"挂的卖单\";\n      }\n      if(num==3){\n        return \"挂的买单\";\n      }\n\n    },\n    mintNft(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const tokenID=this.tokenid;\n      mintMyNFT(library, account, chainID,tokenID);\n    },\n   async getNftList(order_type){\n     const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n     const sellTokenCon = new  getsellToken();\n     const tokenId=this.$data.tokenid;\n    \n\n     this.$data.list = await sellTokenCon.getTokenOrderListFromserver(chainID,tokenId,order_type);\n     console.log(this.$data.list);\n\n    },\n    async readweth(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const result = await wethbalance(library, account, chainID);\n      console.log(result);\n      this.$data.wethNum=result;\n\n    },\n    async makeethtoweth(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const ethnum =1;\n\n      const num =await  \n      ethToWeth(library, account, chainID,ethnum);\n\n    },\n    async checkapprove(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const con = getweth(library, account, chainID);\n      const Wethcontractaddress=con.address;\n\n      const data = await X2Y2allowance(library, account, chainID,Wethcontractaddress);\n      \n      console.log(data);\n\n      // const list = this.$data.selectNft;\n      // this.$data.selectNft=[];\n      // console.log('select ',list);\n      // for (let index = 0; index < list.length; index++) {\n      //   const element = list[index];\n      //   const result  = await checkapproveAll(library, account, chainID,element.tokenAddress);\n      //   element.approveAllstates=result;\n        \n      // }\n      // console.log(this.$data.selectNft);\n      // this.$data.selectNft=list;\n     \n     \n\n    },\n    async approve(element){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const con = getweth(library, account, chainID);\n      const Wethcontractaddress=con.address;\n      const num=100;\n\n      const result  = await X2Y2approve(library, account, chainID,Wethcontractaddress,num);\n\n\n    },\n    Nftchenge(item,index){\n      console.log(item,index);\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const Price = \"1\";\n      const tokenId = this.$data.selectNft[0];\n      const expireTime = AddDayTimes(2);\n      const web3 = this.web3;\n      if(this.wapOrder== undefined){\n        this.wapOrder = new wapOrderdetails(chainID);\n      }\n      this.wapOrder.addBuyorder(item.order,index);\n      \n      \n\n    },\n  //  async pendingbuyorder(){\n  //     const library= this.ethersprovider;\n  //     const account = this.ethAddress;\n  //     const chainID =this.ethChainID;\n  //     const expireTime = AddDayTimes(2);\n  //     const web3 = this.web3;\n  //     const Price = \"1\";\n  //     const unit=\"weth\";\n\n  //   //  offChainOrder = await sellOrder(library, account, chainID,tokenId,Price,expireTime,web3);\n  //   //  console.log(offChainOrder);\n  //   const sellTokenCon = new  getsellToken();\n  //   console.log(\"sellTokenCon\",sellTokenCon);\n  //   console.log(\"sellTokenCon.addnft\",sellTokenCon.addnft);\n  //   this.$data.selectNft.slice(0,1).forEach(element => {\n  //     const Nftcontractaddress =element.tokenAddress;\n  //     const tokenId = element.tokenID;\n  //     sellTokenCon.addnftcollection(Nftcontractaddress,Price);    \n  //   });\n\n  //   const result = await sellTokenCon.buycollectionOrderOffer(library, account, chainID,expireTime,unit);\n  //   console.log('offChainOrder',result);\n\n    \n  //   },\n    async buyOrder(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const Price = \"1\";\n      const tokenId = this.$data.selectNft[0];\n      const expireTime = AddDayTimes(2);\n      const web3 = this.web3;\n      await this.wapOrder.executeOrder(library, account, chainID,expireTime);\n      // const data = await buyOrder(library, account, chainID,offChainOrder,expireTime);\n\n    }\n\n    \n  },\n  mounted() {\n\n    \n  },\n    computed: {\n        ...mapState(['web3', 'ethersprovider', 'ethChainID', 'ethAddress']),\n        isReady() {\n            return this.web3 && this.ethersprovider && this.ethChainID && this.ethAddress;\n        }\n        \n    },\n};\n</script>\n<style lang=\"less\" scoped>\ninput{\n      color: black;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sellorderList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sellorderList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sellorderList.vue?vue&type=template&id=3c783067&scoped=true&\"\nimport script from \"./sellorderList.vue?vue&type=script&lang=js&\"\nexport * from \"./sellorderList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sellorderList.vue?vue&type=style&index=0&id=3c783067&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c783067\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}