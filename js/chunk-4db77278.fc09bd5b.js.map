{"version":3,"sources":["webpack:///./src/views/test/buyordercollection.vue?42fe","webpack:///./src/views/test/buyordercollection.vue?dcf8","webpack:///src/views/test/buyordercollection.vue","webpack:///./src/views/test/buyordercollection.vue?9596","webpack:///./src/views/test/buyordercollection.vue?c4e0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","mintNft","getNftList","_l","item","key","tokenID","directives","name","rawName","value","expression","attrs","domProps","Array","isArray","selectNft","_i","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","Nftchenge","_s","wethNum","readweth","checkapprove","approve","makeethtoweth","approveAllstates","_e","composing","message","pendingbuyorder","buyOrder","staticRenderFns","data","methods","console","log","$data","mounted","component"],"mappings":"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","file":"js/chunk-4db77278.fc09bd5b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./buyordercollection.vue?vue&type=style&index=0&id=44688002&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-container\"},[_vm._v(\" buyOrder-collection \"),_c('button',{on:{\"click\":_vm.mintNft}},[_vm._v(\" 铸造nft \")]),_vm._v(\" \"),_c('br'),_c('button',{on:{\"click\":_vm.getNftList}},[_vm._v(\" 获取全部的nft \")]),_c('br'),_c('br'),_c('br'),_vm._v(\" 我的nft列表 \"),_c('ul',_vm._l((_vm.list),function(item){return _c('li',{key:item.tokenID},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectNft),expression:\"selectNft\"}],attrs:{\"type\":\"checkbox\",\"name\":\"vehicle\"},domProps:{\"value\":item,\"checked\":Array.isArray(_vm.selectNft)?_vm._i(_vm.selectNft,item)>-1:(_vm.selectNft)},on:{\"change\":[function($event){var $$a=_vm.selectNft,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=item,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.selectNft=$$a.concat([$$v]))}else{$$i>-1&&(_vm.selectNft=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.selectNft=$$c}},_vm.Nftchenge]}}),_vm._v(\" \"+_vm._s(item.tokenID)+\" \")])}),0),_c('br'),_c('br'),_vm._v(\" weth:\"+_vm._s(_vm.wethNum)),_c('br'),_c('button',{on:{\"click\":_vm.readweth}},[_vm._v(\" 读取weth 余额 \")]),_c('br'),_c('button',{on:{\"click\":_vm.checkapprove}},[_vm._v(\" 检查WETH否授权额度 \")]),_c('br'),_c('button',{on:{\"click\":_vm.approve}},[_vm._v(\" weth 授权 \")]),_c('br'),_c('br'),_c('div',[_c('button',{on:{\"click\":_vm.makeethtoweth}},[_vm._v(\" 1eth转1weth \")])]),_c('br'),_c('br'),_c('ul',_vm._l((_vm.selectNft.slice(0,1)),function(item){return _c('li',{key:item.tokenID},[(item.approveAllstates==false)?_c('button',{attrs:{\"disabled\":item.approveAllstates},on:{\"click\":function($event){return _vm.approve(item)}}},[_vm._v(\" nft授权 \"+_vm._s(item.tokenID)+\" \")]):_vm._e(),_c('div',[_vm._v(\" nft\"+_vm._s(item.tokenID)+\" 价格 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],attrs:{\"placeholder\":\"edit me\",\"readonly\":\"\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}}),_c('br')])])}),0),_c('br'),_vm._v(\" 单位：weth \"),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.pendingbuyorder}},[_vm._v(\" 挂系列买单 \")]),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.buyOrder}},[_vm._v(\" 成交这个买单 \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home-container\">\n    buyOrder-collection\n    <button @click=\"mintNft\">\n      铸造nft\n    </button> <br>\n    <button @click=\"getNftList\">\n      获取全部的nft\n    </button><br><br><br>\n    我的nft列表\n    <ul>\n      <li v-for=\"item in list\" :key=\"item.tokenID\">\n        <input v-model=\"selectNft\" type=\"checkbox\" :value=\"item\" name=\"vehicle\" @change=\"Nftchenge\"> {{ item.tokenID }}\n      </li>\n    </ul><br><br>\n    weth:{{ wethNum }}<br>\n    <button @click=\"readweth\">\n      读取weth 余额\n    </button><br>\n    <button @click=\"checkapprove\">\n      检查WETH否授权额度\n    </button><br>\n    <button @click=\"approve\">\n      weth 授权\n    </button><br>\n    <br>\n    <div>\n      <button @click=\"makeethtoweth\">\n        1eth转1weth\n      </button>\n    </div>\n\n    <br><br>\n    \n    <ul>\n      <li v-for=\"item in selectNft.slice(0,1)\" :key=\"item.tokenID\">\n        <!-- {{ item }} -->\n        <button v-if=\"item.approveAllstates==false\" :disabled=\"item.approveAllstates\" @click=\"approve(item)\">\n          nft授权 {{ item.tokenID }}  \n        </button>\n        <div>\n          nft{{ item.tokenID }} 价格 \n          <input v-model=\"message\" placeholder=\"edit me\" readonly>\n          <br>\n        </div>\n      </li>\n    </ul>\n    <br>\n    单位：weth\n    <br><br>\n    <button @click=\"pendingbuyorder\">\n      挂系列买单\n    </button>\n    <br><br>\n    <button @click=\"buyOrder\">\n      成交这个买单\n    </button>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport {mintMyNFT,getAllList,checkapproveAll,approveAll,\ngetsellToken,wethbalance,ethToWeth,X2Y2allowance,X2Y2approve,getweth} from '@/contactLogic/swap/index.js';\n\nimport {AddDayTimes}  from '@/contactLogic/swap/utils.js';\n\n\nlet offChainOrder;\nexport default {\n  data() {\n    return {\n    list:[], \n    selectNft:[],\n    selectNftPrise:[],\n    message:'1',\n    wethNum:'0' \n    };\n  },\n  methods: {\n    mintNft(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const tokenID=2;\n      mintMyNFT(library, account, chainID,tokenID);\n    },\n   async getNftList(){\n     const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n\n     this.$data.list = await getAllList(library, account, chainID);\n     console.log(this.$data.list);\n\n    },\n    async readweth(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const result = await wethbalance(library, account, chainID);\n      console.log(result);\n      this.$data.wethNum=result;\n\n    },\n    async makeethtoweth(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const ethnum =1;\n\n      const num =await  \n      ethToWeth(library, account, chainID,ethnum);\n\n    },\n    async checkapprove(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const con = getweth(library, account, chainID);\n      const Wethcontractaddress=con.address;\n\n      const data = await X2Y2allowance(library, account, chainID,Wethcontractaddress);\n      \n      console.log(data);\n\n      // const list = this.$data.selectNft;\n      // this.$data.selectNft=[];\n      // console.log('select ',list);\n      // for (let index = 0; index < list.length; index++) {\n      //   const element = list[index];\n      //   const result  = await checkapproveAll(library, account, chainID,element.tokenAddress);\n      //   element.approveAllstates=result;\n        \n      // }\n      // console.log(this.$data.selectNft);\n      // this.$data.selectNft=list;\n     \n     \n\n    },\n    async approve(element){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const con = getweth(library, account, chainID);\n      const Wethcontractaddress=con.address;\n      const num=100;\n\n      const result  = await X2Y2approve(library, account, chainID,Wethcontractaddress,num);\n\n\n    },\n    Nftchenge(){\n      console.log(this.$data.selectNft);\n      \n\n    },\n   async pendingbuyorder(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const expireTime = AddDayTimes(2);\n      const web3 = this.web3;\n      const Price = \"1\";\n      const unit=\"weth\";\n\n    //  offChainOrder = await sellOrder(library, account, chainID,tokenId,Price,expireTime,web3);\n    //  console.log(offChainOrder);\n    const sellTokenCon = new  getsellToken();\n    console.log(\"sellTokenCon\",sellTokenCon);\n    console.log(\"sellTokenCon.addnft\",sellTokenCon.addnft);\n    this.$data.selectNft.slice(0,1).forEach(element => {\n      const Nftcontractaddress =element.tokenAddress;\n      const tokenId = element.tokenID;\n      sellTokenCon.addnftcollection(Nftcontractaddress,Price);    \n    });\n\n    const result = await sellTokenCon.buycollectionOrderOffer(library, account, chainID,expireTime,unit);\n    console.log('offChainOrder',result);\n    const data1 = await sellTokenCon.sendOrderToserver();\n    console.log('server',data1);\n\n    \n    },\n    async buyOrder(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const Price = \"1\";\n      const tokenId = this.$data.selectNft[0];\n      const expireTime = AddDayTimes(2);\n      const web3 = this.web3;\n\n      // const data = await buyOrder(library, account, chainID,offChainOrder,expireTime);\n\n    }\n\n    \n  },\n  mounted() {\n\n    \n  },\n    computed: {\n        ...mapState(['web3', 'ethersprovider', 'ethChainID', 'ethAddress']),\n        isReady() {\n            return this.web3 && this.ethersprovider && this.ethChainID && this.ethAddress;\n        }\n        \n    },\n};\n</script>\n<style lang=\"less\" scoped>\ninput{\n      color: black;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./buyordercollection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./buyordercollection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./buyordercollection.vue?vue&type=template&id=44688002&scoped=true&\"\nimport script from \"./buyordercollection.vue?vue&type=script&lang=js&\"\nexport * from \"./buyordercollection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buyordercollection.vue?vue&type=style&index=0&id=44688002&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44688002\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}