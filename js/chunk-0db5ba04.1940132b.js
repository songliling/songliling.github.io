(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db5ba04"],{abbb:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vip-dialog"},[n("Modal",{attrs:{"footer-hide":!0},model:{value:e.openConfigDialog,callback:function(t){e.openConfigDialog=t},expression:"openConfigDialog"}},[n("div",{staticClass:"vip-wrapper"},[n("h2",[e._v("My Membership Card")]),n("RadioGroup",{staticClass:"scroll-warpper",on:{"on-change":e.getChoseValue},model:{value:e.passportId,callback:function(t){e.passportId=t},expression:"passportId"}},e._l(e.tokenList,(function(t,r){return n("div",{key:r,staticClass:"vipCard-warpper"},[n("div",{staticClass:"flex items-center justify-between mb-4"},[n("Radio",{attrs:{label:t.token}}),n("h2",{staticClass:"card-title"},[e._v(" "+e._s(t.name)+" ")])],1),n("p",[e._v(" passport ID "),n("span",[e._v(e._s(t.token))])])])})),0),n("div",{staticClass:"btn-wrapper"},[n("button",{on:{click:e.purchaseWithVip}},[e._v(" Confirm ")]),n("button",{on:{click:function(t){e.openConfigDialog=!1}}},[e._v(" Cancel ")])])],1)])],1)},a=[],o=n("1da1"),s=n("5530"),i=(n("d81d"),n("96cf"),n("0bbd")),c=n("1cba"),p=n("2cf0"),u=n("2f62"),l=n("9977"),d={data:function(){return{openConfigDialog:!1,passportId:"",data:{},tokenList:[]}},computed:Object(s["a"])({},Object(u["c"])(["ethAddress","ethersprovider","ethChainID"])),methods:{open:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getVipCards();case 2:t.data=e,t.openConfigDialog=!0;case 4:case"end":return n.stop()}}),n)})))()},getChoseValue:function(e){console.log(e),this.passportId=e},purchaseWithVip:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s,i,u,l,d,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.passportId){t.next=3;break}return console.log("未选择"),t.abrupt("return",!1);case 3:return console.log(e.passportId),t.prev=4,r={library:e.ethersprovider,account:e.ethAddress,chainID:e.ethChainID,projectId:e.data.project_id,pricePerTokenInWei:null===(n=e.data.token_info)||void 0===n?void 0:n.PricePerTokenInWei,isPassport:!0,passportId:e.passportId},a=r.library,o=r.account,s=r.chainID,i=r.projectId,u=r.pricePerTokenInWei,l=r.isPassport,d=r.passportId,t.next=8,Object(c["f"])({library:a,account:o,chainID:s,projectId:i,pricePerTokenInWei:u,isPassport:l,passportId:d});case 8:f=t.sent,console.log({res:f}),e.$Notice.success({title:"Transaction sent successfully",duration:10}),p["a"].$emit("sendtx",[f,{okinfo:"Successful purchase",failinfo:"Purchase failed"}]),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),console.log(t.t0),e.$Notice.error({title:"Failed to send transaction",desc:null===t.t0||void 0===t.t0||null===(h=t.t0.error)||void 0===h?void 0:h.message,duration:10});case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()},getVipCards:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])("/api/vipProject/".concat(e.ethAddress));case 3:n=t.sent,r=n.data,a=r.map((function(e){var t=e.tokens.map((function(t){return{name:e.project.project_name,token:t.token_id}}));return t})),e.tokenList=Object(l["a"])(a),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},f=d,h=(n("d4f7"),n("2877")),v=Object(h["a"])(f,r,a,!1,null,"30a995e0",null);t["default"]=v.exports},c0f0:function(e,t,n){},d4f7:function(e,t,n){"use strict";n("c0f0")}}]);
//# sourceMappingURL=chunk-0db5ba04.1940132b.js.map