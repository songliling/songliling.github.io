{"version":3,"sources":["webpack:///./src/views/test/index.vue?c5c6","webpack:///./src/views/test/index.vue?569f","webpack:///src/views/test/index.vue","webpack:///./src/views/test/index.vue?ee80","webpack:///./src/views/test/index.vue?22e8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","mintNft","getNftList","_l","item","key","tokenID","directives","name","rawName","value","expression","attrs","domProps","Array","isArray","selectNft","_i","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","Nftchenge","_s","checkapprove","approveAllstates","approve","_e","composing","message","setcointype","sellOrder","buyOrder","staticRenderFns","data","methods","$data","cointype","console","log","mounted","component"],"mappings":"yIAAA,W,yCCAA,ICyDA,EDzDIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACN,EAAIO,GAAG,cAAcH,EAAG,MAAMA,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQR,EAAIS,UAAU,CAACT,EAAIO,GAAG,aAAaP,EAAIO,GAAG,KAAKH,EAAG,MAAMA,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQR,EAAIU,aAAa,CAACV,EAAIO,GAAG,eAAeH,EAAG,MAAMA,EAAG,MAAMA,EAAG,MAAMJ,EAAIO,GAAG,aAAaH,EAAG,KAAKJ,EAAIW,GAAIX,EAAQ,MAAE,SAASY,GAAM,OAAOR,EAAG,KAAK,CAACS,IAAID,EAAKE,SAAS,CAACV,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOlB,EAAa,UAAEmB,WAAW,cAAcC,MAAM,CAAC,KAAO,WAAW,KAAO,WAAWC,SAAS,CAAC,MAAQT,EAAK,QAAUU,MAAMC,QAAQvB,EAAIwB,WAAWxB,EAAIyB,GAAGzB,EAAIwB,UAAUZ,IAAO,EAAGZ,EAAa,WAAGQ,GAAG,CAAC,OAAS,CAAC,SAASkB,GAAQ,IAAIC,EAAI3B,EAAIwB,UAAUI,EAAKF,EAAOG,OAAOC,IAAIF,EAAKG,QAAuB,GAAGT,MAAMC,QAAQI,GAAK,CAAC,IAAIK,EAAIpB,EAAKqB,EAAIjC,EAAIyB,GAAGE,EAAIK,GAAQJ,EAAKG,QAASE,EAAI,IAAIjC,EAAIwB,UAAUG,EAAIO,OAAO,CAACF,KAAYC,GAAK,IAAIjC,EAAIwB,UAAUG,EAAIQ,MAAM,EAAEF,GAAKC,OAAOP,EAAIQ,MAAMF,EAAI,UAAWjC,EAAIwB,UAAUM,GAAM9B,EAAIoC,cAAcpC,EAAIO,GAAG,IAAIP,EAAIqC,GAAGzB,EAAKE,SAAS,UAAS,GAAGV,EAAG,MAAMA,EAAG,MAAMA,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQR,EAAIsC,eAAe,CAACtC,EAAIO,GAAG,cAAcH,EAAG,MAAMA,EAAG,MAAMA,EAAG,KAAKJ,EAAIW,GAAIX,EAAa,WAAE,SAASY,GAAM,OAAOR,EAAG,KAAK,CAACS,IAAID,EAAKE,SAAS,CAAyB,GAAvBF,EAAK2B,iBAAyBnC,EAAG,SAAS,CAACgB,MAAM,CAAC,SAAWR,EAAK2B,kBAAkB/B,GAAG,CAAC,MAAQ,SAASkB,GAAQ,OAAO1B,EAAIwC,QAAQ5B,MAAS,CAACZ,EAAIO,GAAG,UAAUP,EAAIqC,GAAGzB,EAAKE,SAAS,OAAOd,EAAIyC,KAAKrC,EAAG,MAAM,CAACJ,EAAIO,GAAG,OAAOP,EAAIqC,GAAGzB,EAAKE,SAAS,QAAQV,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOlB,EAAW,QAAEmB,WAAW,YAAYC,MAAM,CAAC,YAAc,UAAU,SAAW,IAAIC,SAAS,CAAC,MAASrB,EAAW,SAAGQ,GAAG,CAAC,MAAQ,SAASkB,GAAWA,EAAOG,OAAOa,YAAqB1C,EAAI2C,QAAQjB,EAAOG,OAAOX,WAAUd,EAAG,aAAY,GAAGA,EAAG,MAAMJ,EAAIO,GAAG,SAASH,EAAG,QAAQ,CAACgB,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAW,MAAQ,OAAOZ,GAAG,CAAC,OAAS,SAASkB,GAAQ,OAAO1B,EAAI4C,YAAY,WAAW5C,EAAIO,GAAG,QAAQH,EAAG,QAAQ,CAACgB,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAW,MAAQ,QAAQZ,GAAG,CAAC,OAAS,SAASkB,GAAQ,OAAO1B,EAAI4C,YAAY,YAAY5C,EAAIO,GAAG,SAASH,EAAG,MAAMA,EAAG,MAAMA,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQR,EAAI6C,YAAY,CAAC7C,EAAIO,GAAG,UAAUH,EAAG,MAAMA,EAAG,MAAMJ,EAAIO,GAAG,iBAAiBH,EAAG,MAAMA,EAAG,MAAMA,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQR,EAAI8C,WAAW,CAAC9C,EAAIO,GAAG,aAC7vEwC,EAAkB,G,kFCyDtB,GACEC,KADF,WAEI,MAAO,CACX,QACA,aACA,kBACA,YACA,iBAGEC,QAAS,CACPL,YADJ,SACA,GACM3C,KAAKiD,MAAMC,SAAjB,GAGI1C,QALJ,WAMM,IAAN,sBACA,kBACA,kBACA,IACM,OAAN,OAAM,CAAN,UAEA,WAZA,WAYA,yKACA,mBACA,eACA,eAHA,SAKA,sBALA,OAKA,aALA,OAMA,0BANA,8CASI,aArBJ,WAqBA,0KACA,mBACA,eACA,eAEA,oBACA,qBACA,yBACA,IARA,YAQA,YARA,wBASA,OATA,UAUA,qCAVA,QAUA,EAVA,OAWA,qBAXA,QAQA,IARA,uBAcA,+BACA,oBAfA,+CAoBI,QAzCJ,SAyCA,4KACA,mBACA,eACA,eAHA,SAKA,qCALA,4DASI2B,UAlDJ,WAmDMgB,QAAQC,IAAIpD,KAAKiD,MAAM1B,YAI7B,UAvDA,WAuDA,uLACA,mBACA,eACA,eACA,oBACA,OACA,MACA,mBAIA,aACA,8BACA,4CACA,uCACA,qBACA,YACA,mBAjBA,UAoBA,uBApBA,eAoBA,EApBA,OAqBA,+BACA,IACA,wBACA,+BACA,+CAzBA,UA2BA,sBA3BA,QA2BA,EA3BA,OA4BA,wBA5BA,+CAgCI,SAvFJ,WAuFA,iLACA,mBACA,eACA,eACA,IACA,qBACA,oBACA,OAEA,gBACA,IACA,mBAXA,UAaA,wBAbA,QAaA,EAbA,OAcA,eAdA,gDAsBE8B,QAvHF,aA2HE,SAAF,iCACA,qEADA,IAEI,QAFJ,WAGM,OAAN,qECxL8V,I,wBCQ1VC,EAAY,eACd,EACAxD,EACAgD,GACA,EACA,KACA,WACA,MAIa,aAAAQ,E","file":"js/chunk-a01cbe46.07e7176a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7a517cc6&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-container\"},[_vm._v(\" sellOrder\"),_c('br'),_c('button',{on:{\"click\":_vm.mintNft}},[_vm._v(\" 铸造nft \")]),_vm._v(\" \"),_c('br'),_c('button',{on:{\"click\":_vm.getNftList}},[_vm._v(\" 获取我的nft \")]),_c('br'),_c('br'),_c('br'),_vm._v(\" 我的nft列表 \"),_c('ul',_vm._l((_vm.list),function(item){return _c('li',{key:item.tokenID},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectNft),expression:\"selectNft\"}],attrs:{\"type\":\"checkbox\",\"name\":\"vehicle\"},domProps:{\"value\":item,\"checked\":Array.isArray(_vm.selectNft)?_vm._i(_vm.selectNft,item)>-1:(_vm.selectNft)},on:{\"change\":[function($event){var $$a=_vm.selectNft,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=item,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.selectNft=$$a.concat([$$v]))}else{$$i>-1&&(_vm.selectNft=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.selectNft=$$c}},_vm.Nftchenge]}}),_vm._v(\" \"+_vm._s(item.tokenID)+\" \")])}),0),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.checkapprove}},[_vm._v(\" 检查是否授权 \")]),_c('br'),_c('br'),_c('ul',_vm._l((_vm.selectNft),function(item){return _c('li',{key:item.tokenID},[(item.approveAllstates==false)?_c('button',{attrs:{\"disabled\":item.approveAllstates},on:{\"click\":function($event){return _vm.approve(item)}}},[_vm._v(\" nft授权 \"+_vm._s(item.tokenID)+\" \")]):_vm._e(),_c('div',[_vm._v(\" nft\"+_vm._s(item.tokenID)+\" 价格 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],attrs:{\"placeholder\":\"edit me\",\"readonly\":\"\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}}),_c('br')])])}),0),_c('br'),_vm._v(\" 单位： \"),_c('input',{attrs:{\"type\":\"radio\",\"name\":\"cointype\",\"value\":\"eth\"},on:{\"change\":function($event){return _vm.setcointype('eth')}}}),_vm._v(\"eth \"),_c('input',{attrs:{\"type\":\"radio\",\"name\":\"cointype\",\"value\":\"weth\"},on:{\"change\":function($event){return _vm.setcointype('weth')}}}),_vm._v(\"weth \"),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.sellOrder}},[_vm._v(\" 卖出 \")]),_c('br'),_c('br'),_vm._v(\" 针对上面卖出的订单操作 \"),_c('br'),_c('br'),_c('button',{on:{\"click\":_vm.buyOrder}},[_vm._v(\" 买入 \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home-container\">\n    sellOrder<br>\n    <button @click=\"mintNft\">\n      铸造nft\n    </button> <br>\n    <button @click=\"getNftList\">\n      获取我的nft\n    </button><br><br><br>\n    我的nft列表\n    <ul>\n      <li v-for=\"item in list\" :key=\"item.tokenID\">\n        <input v-model=\"selectNft\" type=\"checkbox\" :value=\"item\" name=\"vehicle\" @change=\"Nftchenge\"> {{ item.tokenID }}\n      </li>\n    </ul><br><br>\n    <button @click=\"checkapprove\">\n      检查是否授权\n    </button>\n    <br><br>\n    \n    <ul>\n      <li v-for=\"item in selectNft\" :key=\"item.tokenID\">\n        <!-- {{ item }} -->\n        <button v-if=\"item.approveAllstates==false\" :disabled=\"item.approveAllstates\" @click=\"approve(item)\">\n          nft授权 {{ item.tokenID }}  \n        </button>\n        <div>\n          nft{{ item.tokenID }} 价格 \n          <input v-model=\"message\" placeholder=\"edit me\" readonly>\n          <br>\n        </div>\n      </li>\n    </ul>\n    <br>\n    单位：\n    <input type=\"radio\" name=\"cointype\" value=\"eth\" @change=\"setcointype('eth')\">eth\n    <input type=\"radio\" name=\"cointype\" value=\"weth\" @change=\"setcointype('weth')\">weth\n    <br><br>\n    <button @click=\"sellOrder\">\n      卖出\n    </button>\n    <br><br>\n    针对上面卖出的订单操作\n    <br><br>\n    <button @click=\"buyOrder\">\n      买入\n    </button>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport {mintMyNFT,getmynftList,checkapproveAll,approveAll,\ngetsellToken,wapOrderdetails} from '@/contactLogic/swap/index.js';\n\nimport {AddDayTimes,AddmintTimes}  from '@/contactLogic/swap/utils.js';\n\n\nlet offChainOrder;\nexport default {\n  data() {\n    return {\n    list:[], \n    selectNft:[],\n    selectNftPrise:[],\n    message:'1', \n    cointype:'eth'\n    };\n  },\n  methods: {\n    setcointype(cointype){\n      this.$data.cointype=cointype;\n\n    },\n    mintNft(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const tokenID=2;\n      mintMyNFT(library, account, chainID,tokenID);\n    },\n   async getNftList(){\n     const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n\n     this.$data.list = await getmynftList(library, account, chainID);\n     console.log(this.$data.list);\n\n    },\n    async checkapprove(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n\n      const list = this.$data.selectNft;\n      this.$data.selectNft=[];\n      console.log('select ',list);\n      for (let index = 0; index < list.length; index++) {\n        const element = list[index];\n        const result  = await checkapproveAll(library, account, chainID,element.tokenAddress);\n        element.approveAllstates=result;\n        \n      }\n      console.log(this.$data.selectNft);\n      this.$data.selectNft=list;\n     \n     \n\n    },\n    async approve(element){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n\n      const result  = await approveAll(library, account, chainID,element.tokenAddress);\n\n\n    },\n    Nftchenge(){\n      console.log(this.$data.selectNft);\n      \n\n    },\n   async sellOrder(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const expireTime = AddmintTimes(2);\n      const web3 = this.web3;\n      const Price = \"1\";\n      const unit=this.$data.cointype;\n\n    //  offChainOrder = await sellOrder(library, account, chainID,tokenId,Price,expireTime,web3);\n    //  console.log(offChainOrder);\n    const sellTokenCon = new  getsellToken();\n    console.log(\"sellTokenCon\",sellTokenCon);\n    console.log(\"sellTokenCon.addnft\",sellTokenCon.addnft);\n    this.$data.selectNft.forEach(element => {\n      const Nftcontractaddress =element.tokenAddress;\n      const tokenId = element.tokenID;\n      sellTokenCon.addnft(Nftcontractaddress,tokenId,Price);    \n    });\n\n    const result = await sellTokenCon.sellOrder(library, account, chainID,expireTime,unit);\n    console.log('offChainOrder',result);\n    offChainOrder = result;\n    const ordertoserver = sellTokenCon.getorderForServer();\n    console.log('ordertoserver',ordertoserver);\n    console.log('ordertoserver',JSON.stringify(ordertoserver) );\n\n    const data1 = await sellTokenCon.sendOrderToserver();\n    console.log('server',data1);\n\n    \n    },\n    async buyOrder(){\n      const library= this.ethersprovider;\n      const account = this.ethAddress;\n      const chainID =this.ethChainID;\n      const Price = \"1\";\n      const tokenId = this.$data.selectNft[0];\n      const expireTime = AddDayTimes(2);\n      const web3 = this.web3;\n\n      const wapOrder = new wapOrderdetails(chainID);\n      const tokenIndexOfChainOrder =0;\n      wapOrder.addBuyorder(offChainOrder,tokenIndexOfChainOrder);\n\n      const result = await wapOrder.executeOrder(library, account, chainID,expireTime);\n      console.log(result);\n\n      // const data = await buyOrder(library, account, chainID,offChainOrder,expireTime);\n\n    }\n\n    \n  },\n  mounted() {\n\n    \n  },\n    computed: {\n        ...mapState(['web3', 'ethersprovider', 'ethChainID', 'ethAddress']),\n        isReady() {\n            return this.web3 && this.ethersprovider && this.ethChainID && this.ethAddress;\n        }\n        \n    },\n};\n</script>\n<style lang=\"less\" scoped>\ninput{\n      color: black;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7a517cc6&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7a517cc6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a517cc6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}